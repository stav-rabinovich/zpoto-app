# 🔍 מיפוי נקודות מעבר למערכת ההתחברות

## 📋 סקירה כללית
מסמך זה מסכם את כל הנקודות באפליקציה שדורשות מעבר מ"משתמש משוטט" ל"משתמש מחובר".

---

## 🎯 מסכי התחברות קיימים

### ✅ מסכים זמינים:
- `LoginScreen.js` - מסך התחברות רגיל
- `ServerOnlyLoginScreen.js` - מסך התחברות לשרת
- `RegisterScreen.js` - מסך הרשמה רגיל  
- `ServerOnlyRegisterScreen.js` - מסך הרשמה לשרת

**📝 הערה**: יש מסכי התחברות/הרשמה כפולים - צריך לבחור באילו להשתמש או לאחד אותם.

---

## 🚪 נקודות מעבר עיקריות

### 1. 📱 **גישה למסך פרופיל**
**מיקומים:**
- `App.js` שורה 139: כפתור פרופיל בחלק העליון
- `HomeScreen.js` שורה 490: כפתור "ניהול" במסך הבית

**מצב נוכחי:** 
- ניווט ישיר ל-`ProfileScreen` ללא בדיקת התחברות
- `ProfileScreen` יבדוק פנימית אם המשתמש מחובר

**צריך לעדכן:** 
- הוספת AuthGate לפני הניווט לפרופיל

### 2. 🅿️ **הזמנת חניה**
**מיקום:**
- `SearchResultsScreen.js` שורות 586-589: כפתור "הזמן עכשיו"

**מצב נוכחי:**
- משתמש ב-`AuthGate` בצורה נכונה ✅
- קורא ל-`ACTIONS_REQUIRING_AUTH.BOOK_PARKING`

**סטטוס:** תקין - לא צריך שינוי

### 3. 📚 **צפייה בהזמנות קיימות**
**מיקום:**
- ניווט למסך `BookingsScreen`

**מצב נוכחי:**
- לא נמצא שימוש ב-AuthGate עבור גישה להזמנות

**צריך לעדכן:**
- הוספת AuthGate לכל מקום שמנווט ל-`BookingsScreen`

---

## 🔧 מערכת AuthGate קיימת

### ✅ מה שכבר קיים:
- `AuthGate.js` - קומפוננטה מלאה ופעילה
- `useAuthGate` Hook
- `ACTIONS_REQUIRING_AUTH` - רשימת פעולות שדורשות התחברות
- דוגמאות שימוש ב-`AuthGateExamples.js`

### 🎯 פעולות מוגדרות:
- `BOOK_PARKING` - הזמנת חניה ✅
- `VIEW_BOOKINGS` - צפייה בהזמנות
- `MANAGE_PROFILE` - ניהול פרופיל
- `BECOME_OWNER` - בקשת בעלות חניה

---

## 📝 פעולות נדרשות

### 🔴 עדכונים דחופים:

1. **הוספת AuthGate לפרופיל:**
   - `App.js` שורה 139
   - `HomeScreen.js` שורה 490

2. **הוספת AuthGate להזמנות:**
   - כל מקום שמנווט ל-`BookingsScreen`

3. **החלטה על מסכי התחברות:**
   - איחוד או בחירה בין Regular/ServerOnly screens

### 🟡 שיפורים:

1. **הוספת "intended destination" tracking**
2. **שיפור UX של AuthGate dialogs**
3. **הוספת Social Login למסכי התחברות**

---

## 🎯 מסלולי ניווט

### תרחיש 1: גישה לפרופיל
```
משתמש משוטט → לחיצה על פרופיל → AuthGate → Login/Register → Profile עם נתונים
```

### תרחיש 2: הזמנת חניה  
```
משתמש משוטט → חיפוש חניה → "הזמן עכשיו" → AuthGate → Login/Register → חזרה להזמנה
```

### תרחיש 3: צפייה בהזמנות
```
משתמש משוטט → "ההזמנות שלי" → AuthGate → Login/Register → רשימת הזמנות
```

---

## ✅ Step 1.1 הושלם!
- [x] מיפוי כל הכפתורים/מסכים שדורשים התחברות
- [x] יצירת רשימת "trigger points" למערכת ההתחברות  
- [x] תיעוד מסלולי הניווט הנוכחיים
