# ğŸ—ºï¸ ××¤×ª ××¢×¨×›×ª ×–×¤×•×˜×• - System Map

**×ª××¨×™×š:** 2025-10-29  
**×’×¨×¡×”:** 1.0  
**××˜×¨×”:** ××™×¤×•×™ ××œ× ×©×œ ×”××¢×¨×›×ª ×”×§×™×™××ª

---

## ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×” ×›×œ×œ×™×ª

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚   Frontend      â”‚    â”‚   Backend       â”‚
â”‚   Client        â”‚â—„â”€â”€â–ºâ”‚   Admin         â”‚â—„â”€â”€â–ºâ”‚   API Server    â”‚
â”‚   (React Native)â”‚    â”‚   (React Web)   â”‚    â”‚   (Node.js)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   AsyncStorage  â”‚    â”‚   LocalStorage  â”‚    â”‚   PostgreSQL    â”‚
â”‚   (Mobile)      â”‚    â”‚   (Browser)     â”‚    â”‚   (Prisma ORM)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Frontend Client (React Native)

### ğŸ“± ××¡×›×™× ×¢×™×§×¨×™×™×:
- **HomeScreen.js** (51KB) - ××¡×š ×‘×™×ª ×¢× ×—×™×¤×•×© ×•× ×™×•×•×˜
- **SearchResultsScreen.js** (67KB) - ×ª×•×¦××•×ª ×—×™×¤×•×© ×—× ×™×•×ª
- **BookingScreen.js** (66KB) - ×™×¦×™×¨×ª ×”×–×× ×” ×—×“×©×”
- **PaymentScreen.js** (44KB) - ×ª×©×œ×•× ×•×”×–×× ×”
- **ProfileScreen.js** (37KB) - ×¤×¨×•×¤×™×œ ××©×ª××©

### ğŸ‘¤ ××¡×›×™ ×‘×¢×œ×™ ×—× ×™×”:
- **OwnerIntroScreen.js** (32KB) - ××‘×•× ×•×¨×™×©×•× ×‘×¢×œ×™ ×—× ×™×”
- **OwnerDashboardScreen.js** (14KB) - ×“×©×‘×•×¨×“ ×‘×¢×œ ×—× ×™×”
- **OwnerPendingScreen.js** (21KB) - ×”×–×× ×•×ª ×××ª×™× ×•×ª ×œ××™×©×•×¨
- **OwnerAvailabilityScreen.js** (17KB) - × ×™×”×•×œ ×–××™× ×•×ª
- **OwnerAnalyticsScreen.js** (13KB) - ×× ×œ×™×˜×™×§×” ×•×”×›× ×¡×•×ª

### ğŸ“‹ ××¡×›×™ × ×™×”×•×œ:
- **BookingsScreen.js** (13KB) - ×¨×©×™××ª ×”×–×× ×•×ª
- **BookingDetailScreen.js** (10KB) - ×¤×¨×˜×™ ×”×–×× ×”
- **FavoritesScreen.js** (10KB) - ××•×¢×“×¤×™×
- **NotificationsScreen.js** (12KB) - ×”×ª×¨××•×ª

### ğŸ”§ ××¡×›×™ ××¢×¨×›×ª:
- **LoginScreen.js** (9KB) - ×”×ª×—×‘×¨×•×ª
- **RegisterScreen.js** (7KB) - ×¨×™×©×•×
- **MigrationScreen.js** (12KB) - ×”×¢×‘×¨×ª × ×ª×•× ×™×
- **DebugScreen.js** (13KB) - ×›×œ×™ debug

### âš ï¸ ××¡×›×™× ×–×× ×™×™×/×™×©× ×™×:
- **MigrationTestScreen.js** (16KB) - ×‘×“×™×§×•×ª migration
- **LegacyCleanupScreen.js** (15KB) - × ×™×§×•×™ × ×ª×•× ×™× ×™×©× ×™×
- **ServerOnly*** - ××¡×›×™× ×œ×’×¨×¡×” server-only

---

## ğŸ–¥ï¸ Backend API (Node.js + Express)

### ğŸ›£ï¸ Routes ×¢×™×§×¨×™×™×:

#### ğŸ‘¤ Authentication & Users:
- **auth.routes.ts** (4KB) - ×”×ª×—×‘×¨×•×ª ×•×¨×™×©×•×
- **profile.routes.ts** (9KB) - × ×™×”×•×œ ×¤×¨×•×¤×™×œ
- **anonymous.routes.ts** (17KB) - APIs ×œ××©×ª××©×™× ××•×¨×—×™×

#### ğŸš— Parking & Bookings:
- **parkings.routes.ts** (4KB) - ×—×™×¤×•×© ×•× ×™×”×•×œ ×—× ×™×•×ª
- **bookings.routes.ts** (19KB) - ×™×¦×™×¨×ª ×•× ×™×”×•×œ ×”×–×× ×•×ª
- **extensions.routes.ts** (3KB) - ×”××¨×›×ª ×—× ×™×•×ª
- **payments.routes.ts** (7KB) - ×ª×©×œ×•××™×

#### ğŸ  Owner Management:
- **owner.routes.ts** (21KB) - × ×™×”×•×œ ×‘×¢×œ×™ ×—× ×™×”
- **commission.routes.ts** (9KB) - ×—×™×©×•×‘ ×¢××œ×•×ª
- **operationalFees.routes.ts** (2KB) - ×“××™ ×ª×¤×¢×•×œ

#### ğŸ« Features:
- **coupons.routes.ts** (2KB) - ××¢×¨×›×ª ×§×•×¤×•× ×™×
- **favorites.routes.ts** (5KB) - ××•×¢×“×¤×™×
- **saved-places.routes.ts** (5KB) - ××§×•××•×ª ×©××•×¨×™×
- **recent-searches.routes.ts** (4KB) - ×—×™×¤×•×©×™× ××—×¨×•× ×™×
- **vehicles.routes.ts** (5KB) - × ×™×”×•×œ ×¨×›×‘×™×

#### ğŸ”§ Admin & System:
- **admin.routes.ts** (35KB) - ×××©×§ ××“××™×Ÿ ××œ×
- **migration.routes.ts** (12KB) - ×”×¢×‘×¨×ª × ×ª×•× ×™×
- **notifications.routes.ts** (3KB) - ×”×ª×¨××•×ª
- **documents.routes.ts** (19KB) - × ×™×”×•×œ ××¡××›×™×
- **jobs.routes.ts** (4KB) - ××©×™××•×ª ×¨×§×¢

#### ğŸ› ï¸ Utilities:
- **public.routes.ts** (2KB) - APIs ×¦×™×‘×•×¨×™×™×
- **quick-fix.routes.ts** (4KB) - ×ª×™×§×•× ×™× ××”×™×¨×™×
- **payment-methods.routes.ts** (6KB) - ×××¦×¢×™ ×ª×©×œ×•×
- **chat.routes.ts** (1KB) - ×¦'××˜ (×œ× ×¤×¢×™×œ?)

---

## ğŸ—„ï¸ ××¡×“ × ×ª×•× ×™× (PostgreSQL + Prisma)

### ğŸ“Š ×˜×‘×œ××•×ª ×¢×™×§×¨×™×•×ª:
- **User** - ××©×ª××©×™× (×œ×§×•×—×•×ª ×•×‘×¢×œ×™ ×—× ×™×”)
- **Parking** - ×—× ×™×•×ª
- **Booking** - ×”×–×× ×•×ª
- **Commission** - ×¢××œ×•×ª
- **OperationalFee** - ×“××™ ×ª×¤×¢×•×œ
- **Coupon** / **CouponUsage** - ××¢×¨×›×ª ×§×•×¤×•× ×™×
- **Vehicle** - ×¨×›×‘×™×
- **Favorite** - ××•×¢×“×¤×™×
- **SavedPlace** - ××§×•××•×ª ×©××•×¨×™×
- **RecentSearch** - ×—×™×¤×•×©×™× ××—×¨×•× ×™×
- **Notification** - ×”×ª×¨××•×ª
- **ListingRequest** - ×‘×§×©×•×ª ×¨×™×©×•× ×‘×¢×œ×™ ×—× ×™×”

---

## ğŸŒ Frontend Admin (React Web)

### ğŸ“Š ×“×¤×™× ×¢×™×§×¨×™×™×:
- **Dashboard.jsx** - ×“×©×‘×•×¨×“ ×¨××©×™ ×¢× ×¡×˜×˜×™×¡×˜×™×§×•×ª
- **DashboardNew.jsx** - ×“×©×‘×•×¨×“ ××—×•×“×©
- **CouponsSection.jsx** - × ×™×”×•×œ ×§×•×¤×•× ×™×
- **SignaturePage.jsx** - ×—×ª×™××•×ª ×“×™×’×™×˜×œ×™×•×ª

---

## ğŸ”„ ×–×¨×™××ª × ×ª×•× ×™× ×¢×™×§×¨×™×ª

### 1. ×—×™×¤×•×© ×—× ×™×”:
```
HomeScreen â†’ SearchResultsScreen â†’ BookingScreen â†’ PaymentScreen
     â†“              â†“                    â†“             â†“
/api/parkings  /api/bookings    /api/bookings   /api/payments
   /search     /availability      /create       /process
```

### 2. × ×™×”×•×œ ×”×–×× ×•×ª:
```
BookingsScreen â†’ BookingDetailScreen â†’ Extensions/Cancellation
      â†“                â†“                        â†“
/api/bookings    /api/bookings/:id    /api/extensions/execute
```

### 3. ×‘×¢×œ ×—× ×™×”:
```
OwnerIntroScreen â†’ OwnerDashboardScreen â†’ OwnerPendingScreen
       â†“                  â†“                     â†“
/api/owner/apply   /api/owner/stats    /api/bookings/pending
```

---

## âš ï¸ × ×§×•×“×•×ª ×‘×¢×™×™×ª×™×•×ª ×©×–×•×”×•

### ğŸ”´ ×§×‘×¦×™× ×–×× ×™×™×:
- ~15 ×§×‘×¦×™ debug ×‘backend
- ××¡×›×™ MigrationTest ×•-LegacyCleanup
- ×§×‘×¦×™ fallback-old

### ğŸŸ¡ ×ª×œ×•×ª×™× ×œ× ×‘×©×™××•×©:
- expo-file-system, expo-image-picker
- react-native-reanimated
- @react-navigation/native-stack

### ğŸŸ  ×ª×œ×•×ª×™× ×—×¡×¨×™×:
- @expo/vector-icons
- @react-native-netinfo/netinfo
- supertest (backend tests)
- react-router-dom (admin)

### ğŸ”µ ×›×¤×™×œ×•×™×•×ª ××¤×©×¨×™×•×ª:
- BookingDetailScreen vs BookingDetailScreenNew
- ServerOnly* screens ××•×œ regular screens
- Dashboard vs DashboardNew

---

## ğŸ“ˆ ×¡×˜×˜×™×¡×˜×™×§×•×ª

| ×¨×›×™×‘ | ×§×‘×¦×™× | ×’×•×“×œ ×›×•×œ×œ | ×”×¢×¨×•×ª |
|------|-------|-----------|-------|
| Frontend Client | 38 screens | ~500KB | ×›×•×œ×œ ××¡×›×™× ×–×× ×™×™× |
| Backend Routes | 24 routes | ~200KB | ××¢×¨×›×ª ××œ××” |
| Frontend Admin | 4 ×“×¤×™× | ~50KB | ×××©×§ ×‘×¡×™×¡×™ |
| **×¡×”"×›** | **66 ×§×‘×¦×™×** | **~750KB** | ×œ×¤× ×™ × ×™×§×•×™ |

---

## ğŸ¯ ×”××œ×¦×•×ª ×œ×©×œ×‘ ×”×‘×

1. **× ×™×§×•×™ ××™×™×“×™:** ××—×™×§×ª ×§×‘×¦×™ debug ×•×–×× ×™×™×
2. **××™×—×•×“ ×›×¤×™×œ×•×™×•×ª:** ×”×—×œ×˜×” ×¢×œ ×’×¨×¡×” ××—×ª ×œ×›×œ ××¡×š
3. **×ª×™×§×•×Ÿ ×ª×œ×•×ª×™×:** ×”×ª×§× ×ª ×—×¡×¨×™×, ××—×™×§×ª ××™×•×ª×¨×™×
4. **××¨×’×•×Ÿ ××‘× ×”:** ×”×¢×‘×¨×” ×œ××‘× ×” ×ª×™×§×™×•×ª ××—×™×“

**×”×¢×¨×”:** ×”××¢×¨×›×ª ××•×¨×›×‘×ª ××š ×××•×¨×’× ×ª ×™×—×¡×™×ª. ×”×¢×™×§×¨ ×”×•× × ×™×§×•×™ ×”×§×‘×¦×™× ×”×–×× ×™×™× ×•××¨×’×•×Ÿ ××—×“×©.
