# 🚗 **Zpoto Parking Experience - תכנית פיתוח מתקדמת**

## 📋 **סקירה כללית**
פיתוח מערכת חניה מתקדמת עם חוויית משתמש מיטבית הכוללת:
- שילוב דף בית ותוצאות חיפוש למסך אחד דינמי
- מערכת הזמנות גמישה עם 2 מודי תשלום
- מערכת התראות מותאמת אישית
- UI/UX מתקדם ורספונסיבי

---

## 🎯 **Phase 1: מיזוג דף הבית ותוצאות החיפוש**

### **Step 1.1: תכנון ארכיטקטורה החדשה**
- [ ] **Task 1.1.1**: ניתוח המסכים הקיימים (HomeScreen + SearchResultsScreen)
- [ ] **Task 1.1.2**: תכנון מבנה קומפוננטים חדש (SplitScreen)
- [ ] **Task 1.1.3**: תכנון State Management עבור המסך המשולב
- [ ] **Task 1.1.4**: תכנון אנימציות להקטנה/הגדלה של פאנלים
- [ ] **✅ Step 1.1 הושלם** - ארכיטקטורה מתוכננת

### **Step 1.2: יצירת קומפוננט SplitHomeScreen חדש**
- [ ] **Task 1.2.1**: יצירת `screens/SplitHomeScreen.js` כמסך ראשי חדש
- [ ] **Task 1.2.2**: הפרדת חלק החיפוש לקומפוננט `components/SearchSection.js`
- [ ] **Task 1.2.3**: הפרדת חלק המפה לקומפוננט `components/MapSection.js`
- [ ] **Task 1.2.4**: יצירת קומפוננט `components/CollapsiblePanel.js` לפונקציונליות הקטנה/הגדלה
- [ ] **✅ Step 1.2 הושלם** - קומפוננטים בסיסיים נוצרו

### **Step 1.3: פיתוח SearchSection**
- [ ] **Task 1.3.1**: העברת לוגיקת החיפוש מ-HomeScreen
- [ ] **Task 1.3.2**: **הסרת מקומות שמורים** מהחלק העליון
- [ ] **Task 1.3.3**: אופטימיזציה לתצוגה קומפקטית יותר
- [ ] **Task 1.3.4**: הוספת אנימציות לכיווץ/הרחבה
- [ ] **✅ Step 1.3 הושלם** - SearchSection מוכן

### **Step 1.4: פיתוח MapSection המתקדם**
- [ ] **Task 1.4.1**: העברת לוגיקת המפה מ-SearchResultsScreen
- [ ] **Task 1.4.2**: **פילטור חניות זמינות לשעה הקרובה בלבד** (ברדיוס 700m)
- [ ] **Task 1.4.3**: אינטגרציה עם מיקום נוכחי אוטומטי
- [ ] **Task 1.4.4**: אופטימיזציה לביצועים עבור עדכונים בזמן אמת
- [ ] **✅ Step 1.4 הושלם** - MapSection מתקדם מוכן

### **Step 1.5: אינטגרציה ובדיקות**
- [ ] **Task 1.5.1**: שילוב הקומפוננטים ב-SplitHomeScreen
- [ ] **Task 1.5.2**: עדכון Navigation לשימוש במסך החדש
- [ ] **Task 1.5.3**: בדיקות פונקציונליות מקיפות
- [ ] **Task 1.5.4**: אופטימיזציה לביצועים ו-UX
- [ ] **✅ Step 1.5 הושלם** - מסך משולב מוכן לשימוש

---

## 📅 **Phase 2: שיפור מערכת ההזמנות**

### **Step 2.1: שיפור דף ההזמנה - שעת התחלה**
- [ ] **Task 2.1.1**: הוספת שדה שעת התחלה **חובה** לדף ההזמנה
- [ ] **Task 2.1.2**: יצירת פונקציה לחישוב עיגול ל-15 דקות הקרובות
- [ ] **Task 2.1.3**: הגדרת ברירת מחדל דינמית (עיגול מהזמן הנוכחי)
- [ ] **Task 2.1.4**: ולידציה ומניעת בחירת זמן עבר
- [ ] **✅ Step 2.1 הושלם** - שעת התחלה מוכנה

### **Step 2.2: הצגת זמינות החניה**
- [ ] **Task 2.2.1**: יצירת API לחישוב זמינות מקסימלית לחניה
- [ ] **Task 2.2.2**: לוגיקה לחישוב זמינות (עד 12 שעות מקסימום)
- [ ] **Task 2.2.3**: **הצגת זמינות מתחת לשם החניה** בעיצוב בולט
- [ ] **Task 2.2.4**: עיצוב בצבעי המותג עבור הודעת הזמינות
- [ ] **✅ Step 2.2 הושלם** - הצגת זמינות מוכנה

### **Step 2.3: פיתוח צ'ק בוקס "אני יודע שעת סיום"**
- [ ] **Task 2.3.1**: הוספת צ'ק בוקס לדף ההזמנה
- [ ] **Task 2.3.2**: לוגיקה דינמית להצגת/הסתרת שדה שעת סיום
- [ ] **Task 2.3.3**: ולידציה לשעת סיום (בטווח הזמין)
- [ ] **Task 2.3.4**: שמירת סוג ההזמנה (fixed_time / usage_based)
- [ ] **✅ Step 2.3 הושלם** - מערכת בחירת זמן מוכנה

---

## 💳 **Phase 3: מערכת תשלומים גמישה**

### **Step 3.1: תשלום מראש (זמן קבוע)**
- [ ] **Task 3.1.1**: עדכון דף התשלום לתשלום מלא מראש
- [ ] **Task 3.1.2**: שמירת סוג הזמנה `FIXED_TIME` במסד הנתונים
- [ ] **Task 3.1.3**: שמירת פרטי תשלום עם אופן החיוב
- [ ] **Task 3.1.4**: בדיקות זרימת תשלום מלאה
- [ ] **✅ Step 3.1 הושלם** - תשלום מראש מוכן

### **Step 3.2: תשלום לפי שימוש**
- [ ] **Task 3.2.1**: עדכון דף התשלום לתשלום שעה ראשונה בלבד
- [ ] **Task 3.2.2**: **הוספת הסבר על השרייה** ותהליך התשלום
- [ ] **Task 3.2.3**: שמירת סוג הזמנה `USAGE_BASED` במסד הנתונים
- [ ] **Task 3.2.4**: מערכת תפיסת מסגרת אשראי לשעה ראשונה
- [ ] **✅ Step 3.2 הושלם** - תשלום לפי שימוש מוכן

### **Step 3.3: עדכון מסד הנתונים**
- [ ] **Task 3.3.1**: הוספת שדה `booking_type` (FIXED_TIME / USAGE_BASED)
- [ ] **Task 3.3.2**: הוספת שדה `actual_end_time` להזמנות
- [ ] **Task 3.3.3**: עדכון מבנה התשלומים לתמיכה בשני המודים
- [ ] **Task 3.3.4**: מיגרציה של הזמנות קיימות ל-FIXED_TIME
- [ ] **✅ Step 3.3 הושלם** - מסד נתונים מעודכן

---

## ⏰ **Phase 4: מערכת הזמנות מתקדמת**

### **Step 4.1: טיימר דינמי להזמנות**
- [ ] **Task 4.1.1**: יצירת קומפוננט `BookingTimer.js` דינמי
- [ ] **Task 4.1.2**: **ספירה למטה** עבור FIXED_TIME הזמנות
- [ ] **Task 4.1.3**: **ספירה למעלה** עבור USAGE_BASED הזמנות
- [ ] **Task 4.1.4**: עיצוב מותאם לכל סוג הזמנה
- [ ] **✅ Step 4.1 הושלם** - טיימר דינמי מוכן

### **Step 4.2: מסך פרטי הזמנה מתקדם**
- [ ] **Task 4.2.1**: זיהוי אוטומטי של סוג ההזמנה
- [ ] **Task 4.2.2**: הצגת כפתור "הארכה" ל-FIXED_TIME
- [ ] **Task 4.2.3**: **הצגת כפתור "יצאתי"** ל-USAGE_BASED
- [ ] **Task 4.2.4**: עיצוב מותאם לכל סוג הזמנה
- [ ] **✅ Step 4.2 הושלם** - מסך פרטים מתקדם

### **Step 4.3: פונקציונליות "יצאתי"**
- [ ] **Task 4.3.1**: יצירת API לסיום הזמנה ידני
- [ ] **Task 4.3.2**: **הוספת אזהרת אישור** עם הודעת אזהרה
- [ ] **Task 4.3.3**: חישוב זמן שימוש בפועל וחיוב
- [ ] **Task 4.3.4**: עדכון סטטוס הזמנה ל-COMPLETED
- [ ] **✅ Step 4.3 הושלם** - פונקציונליות יציאה מוכנה

### **Step 4.4: מערכת חיובים חכמה**
- [ ] **Task 4.4.1**: חישוב אוטומטי של עלות לפי זמן שימוש
- [ ] **Task 4.4.2**: ניכוי התשלום המקדמי מהחיוב הסופי
- [ ] **Task 4.4.3**: טיפול במקרי חריגה (יותר מ-12 שעות)
- [ ] **Task 4.4.4**: מערכת החזר כספי במקרה הצורך
- [ ] **✅ Step 4.4 הושלם** - מערכת חיובים מוכנה

---

## 🔔 **Phase 5: מערכת התראות מתקדמת**

### **Step 5.1: התראות עבור FIXED_TIME**
- [ ] **Task 5.1.1**: **10 דקות לפני תחילת החניה** - הודעת תזכורת
- [ ] **Task 5.1.2**: **30 דקות לפני סיום** - אזהרת סיום (קיים)
- [ ] **Task 5.1.3**: עדכון מערכת ההתראות הקיימת
- [ ] **Task 5.1.4**: בדיקות לוגיקת התראות
- [ ] **✅ Step 5.1 הושלם** - התראות FIXED_TIME מוכנות

### **Step 5.2: התראות עבור USAGE_BASED**
- [ ] **Task 5.2.1**: **10 דקות לפני תחילה** - הודעת תזכורת
- [ ] **Task 5.2.2**: **כל שעתיים** - תזכורת לא לשכוח לסיים
- [ ] **Task 5.2.3**: לוגיקה לשליחת התראות חוזרות
- [ ] **Task 5.2.4**: מניעת התראות מיותרות (אחרי סיום)
- [ ] **✅ Step 5.2 הושלם** - התראות USAGE_BASED מוכנות

### **Step 5.3: התראות פינוי לשני הסוגים**
- [ ] **Task 5.3.1**: **15 דקות לפני פינוי חובה** - הודעת אזהרה
- [ ] **Task 5.3.2**: חישוב זמן פינוי לפי זמינות החניה
- [ ] **Task 5.3.3**: נוסח הודעות ברור ומובן
- [ ] **Task 5.3.4**: אינטגרציה עם מערכת ההודעות הקיימת
- [ ] **✅ Step 5.3 הושלם** - התראות פינוי מוכנות

### **Step 5.4: מערכת ניהול התראות**
- [ ] **Task 5.4.1**: יצירת מערכת תזמון התראות רובסטית
- [ ] **Task 5.4.2**: מעקב אחר התראות שנשלחו (לא לשכפל)
- [ ] **Task 5.4.3**: התמודדות עם תרחישי קצה (אפליקציה סגורה)
- [ ] **Task 5.4.4**: לוג מפורט לפעילות התראות
- [ ] **✅ Step 5.4 הושלם** - מערכת התראות מקיפה

---

## 🧪 **Phase 6: בדיקות ואופטימיזציה**

### **Step 6.1: בדיקות פונקציונליות מקיפות**
- [ ] **Task 6.1.1**: בדיקת זרימת FIXED_TIME מקצה לקצה
- [ ] **Task 6.1.2**: בדיקת זרימת USAGE_BASED מקצה לקצה
- [ ] **Task 6.1.3**: בדיקת מעברים בין מצבים
- [ ] **Task 6.1.4**: בדיקת תרחישי קצה וחריגות
- [ ] **✅ Step 6.1 הושלם** - בדיקות פונקציונליות

### **Step 6.2: אופטימיזציה וביצועים**
- [ ] **Task 6.2.1**: אופטימיזציה לביצועי המסך המשולב
- [ ] **Task 6.2.2**: זיכרון ומניעת דליפות זיכרון
- [ ] **Task 6.2.3**: אופטימיזציה למערכת ההתראות
- [ ] **Task 6.2.4**: בדיקות עומס ויציבות
- [ ] **✅ Step 6.2 הושלם** - מערכת מותאמת לייצור

### **Step 6.3: חוויית משתמש מיטבית**
- [ ] **Task 6.3.1**: ביקורת UX כוללת
- [ ] **Task 6.3.2**: שיפור אנימציות ומעברים
- [ ] **Task 6.3.3**: אופטימיזציה לנגישות
- [ ] **Task 6.3.4**: פולישינג גרפי סופי
- [ ] **✅ Step 6.3 הושלם** - UX מושלמת

---

## 📊 **Phase 7: ניטור ואנליטיקס**

### **Step 7.1: מערכת ניטור מתקדמת**
- [ ] **Task 7.1.1**: הוספת אנליטיקס לשימוש במודים השונים
- [ ] **Task 7.1.2**: מעקב אחר המרות ונטישות
- [ ] **Task 7.1.3**: ניטור ביצועי המערכת החדשה
- [ ] **Task 7.1.4**: דאשבורד ניהולי למעקב
- [ ] **✅ Step 7.1 הושלם** - ניטור מקיף

---

## 🎉 **סיכום הפרויקט**

### **יעדי הפרויקט:**
- ✅ מסך בית משולב ואינטואיטיבי
- ✅ מערכת הזמנות גמישה (2 מודים)
- ✅ מערכת תשלומים מתקדמת
- ✅ התראות מותאמות אישית
- ✅ חוויית משתמש מיטבית

### **טכנולוגיות עיקריות:**
- React Native עם Hooks מתקדמים
- Animated API לאנימציות חלקות
- WebSocket לעדכונים בזמן אמת
- Push Notifications מתקדמות
- State Management מורכב

### **אומדן זמן:**
- **Phase 1-2:** ~2-3 שבועות
- **Phase 3-4:** ~2-3 שבועות  
- **Phase 5:** ~1-2 שבועות
- **Phase 6-7:** ~1 שבוע
- **סה"כ:** ~6-9 שבועות

---

*תכנית זו מבוססת על עקרונות פיתוח Agile עם דגש על איכות קוד, חוויית משתמש ויציבות מערכת.*
