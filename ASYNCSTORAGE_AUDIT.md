# 📋 **AsyncStorage Usage Audit - Step 1.1**

## 🔍 **רשימה מלאה של כל השימושים ב-AsyncStorage**

### **📁 קבצים עם AsyncStorage (21 קבצים):**

---

## **🔐 אימות (AuthContext.js) - מותר להישאר**
- ✅ `userToken` - שמירת טוקן אימות (מותר)
- ✅ `user` - שמירת פרטי משתמש בסיסיים (מותר)

---

## **❌ קבצים שצריכים הסרה מלאה:**

### **1. BookingScreen.js - 13 שימושים**
- ❌ `PROFILE_KEY` - טעינת פרופיל מקומי
- ❌ `VEHICLES_KEY` - טעינת רכבים מקומיים  
- ❌ `plate`, `carDesc` - שמירת פרטי רכב
- ❌ `BOOKINGS_KEY` - שמירת הזמנות מקומיות (גיבוי)
- ❌ `LISTINGS_KEY` - טעינת רשימות חניות מקומיות
- **🎯 פעולה:** הסרת כל השמירות המקומיות, מעבר מלא ל-API

### **2. HomeScreen.js - 10 שימושים**
- ❌ `lastQuery` - שמירת חיפוש אחרון
- ❌ `RECENTS_KEY` - חיפושים אחרונים
- ❌ `SAVED_PLACES_KEY` - מקומות שמורים
- ❌ `bookings` - טעינת הזמנות פעילות
- **🎯 פעולה:** מעבר לשמירת חיפושים ומקומות בשרת

### **3. SearchResultsScreen.js - 10 שימושים**
- ❌ שמירת תוצאות חיפוש מקומיות
- ❌ cache של נתוני חניות
- **🎯 פעולה:** מעבר מלא לחיפוש משרת

### **4. ProfileScreen.js - 5 שימושים**
- ❌ `PROFILE_KEY` - שמירת פרופיל מקומי
- ❌ `SAVED_PLACES_KEY` - מקומות שמורים
- **🎯 פעולה:** מעבר מלא ל-API פרופיל

### **5. FavoritesScreen.js - 6 שימושים**
- ❌ שמירת מועדפים מקומיים
- **🎯 פעולה:** מעבר ל-API מועדפים

---

## **🗂️ קבצי שירותים שצריכים מחיקה מלאה:**

### **6. services/fallback.js - 13 שימושים**
- ❌ `PENDING_ACTIONS` - פעולות ממתינות
- ❌ `CACHED_DATA` - cache מקומי
- ❌ `LAST_SYNC` - זמן סינכרון אחרון
- ❌ `OFFLINE_MODE` - מצב offline
- **🎯 פעולה:** מחיקת הקובץ כולו

### **7. services/migration.js - 21 שימושים**
- ❌ כל מנגנון המיגרציה
- **🎯 פעולה:** מחיקת הקובץ כולו (כבר לא נדרש)

### **8. services/api-with-fallback.js - 2 שימושים**
- ❌ API עם fallback מקומי
- **🎯 פעולה:** מחיקת הקובץ כולו

### **9. data/storage.js - 4 שימושים**
- ❌ מנגנון אחסון מקומי כללי
- **🎯 פעולה:** מחיקת הקובץ כולו

### **10. data/listingsRepo.js - 4 שימושים**
- ❌ repository מקומי לחניות
- **🎯 פעולה:** מחיקת הקובץ כולו

---

## **🧹 קבצי ניקוי וכלים (להסרה):**

### **11. utils/legacy-cleanup.js - 29 שימושים**
- ❌ כלי ניקוי נתונים ישנים
- **🎯 פעולה:** מחיקת הקובץ כולו

### **12. utils/auth-fix.js - 8 שימושים**
- ❌ כלי תיקון אימות (יצרנו לדיבוג)
- **🎯 פעולה:** מחיקת הקובץ כולו

### **13. screens/DebugScreen.js - 5 שימושים**
- ❌ מסך דיבוג (יצרנו לדיבוג)
- **🎯 פעולה:** מחיקת הקובץ כולו

### **14. screens/LegacyCleanupScreen.js - 1 שימוש**
- ❌ מסך ניקוי נתונים ישנים
- **🎯 פעולה:** מחיקת הקובץ כולו

### **15. tests/migration-regression.js - 5 שימושים**
- ❌ בדיקות מיגרציה
- **🎯 פעולה:** מחיקת הקובץ כולו

---

## **🏢 מסכי בעלי חניות:**

### **16. OwnerApplyScreen.js - 5 שימושים**
- ❌ שמירת בקשות מקומיות
- **🎯 פעולה:** מעבר מלא ל-API

### **17. OwnerIntroScreen.js - 3 שימושים**
- ❌ שמירת סטטוס בעלות מקומי
- **🎯 פעולה:** מעבר מלא ל-API

### **18. OwnerListingFormScreen.js - 3 שימושים**
- ❌ שמירת טפסים מקומיים
- **🎯 פעולה:** מעבר מלא ל-API

### **19. OwnerDashboardScreen.js - 1 שימוש**
- ❌ שמירת נתוני דשבורד מקומיים
- **🎯 פעולה:** מעבר מלא ל-API

---

## **🔧 קבצי תשתית:**

### **20. utils/api.js - 2 שימושים**
- ✅ טעינת טוקן לבקשות (מותר להישאר)
- **🎯 פעולה:** לבדוק שמשתמש רק בטוקן

---

## **📊 סיכום:**

### **✅ מותר להישאר (2 שימושים):**
- `AuthContext.js` - טוקן ופרטי משתמש בסיסיים
- `utils/api.js` - טעינת טוקן לבקשות

### **❌ לביטול מלא (19 קבצים, ~150+ שימושים):**
- **מסכים:** 8 קבצים
- **שירותים:** 6 קבצים  
- **כלים וניקוי:** 5 קבצים

### **🎯 סדר עדיפויות להסרה:**
1. **קבצי כלים וניקוי** - מחיקה מלאה
2. **קבצי שירותים** - מחיקה מלאה
3. **מסכי בעלי חניות** - מעבר ל-API
4. **מסכים עיקריים** - מעבר ל-API

---

## **🚨 זיהוי Fallback Patterns:**

### **דפוסים נפוצים שנמצאו:**
1. **"שמירה מקומית כגיבוי"** - בBookingScreen
2. **"אם השרת לא עובד"** - בfallback.js
3. **"טעינה מקומית ואז משרת"** - במסכים שונים
4. **"cache מקומי"** - בשירותים שונים

### **🎯 כל הדפוסים האלה צריכים הסרה מלאה!**

---

**✅ Step 1.1 הושלם - זוהו כל השימושים ב-AsyncStorage**
