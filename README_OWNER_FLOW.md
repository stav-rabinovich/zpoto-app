# תכנית עבודה: זרימת בעלי חניה באפליקציה

## סקירת המצב הנוכחי 

### מסכים קיימים:
- **OwnerIntroScreen.js** - מסך ראשי עם 3 מצבים: none, pending, approved
- **OwnerApplyScreen.js** - מסך הגשת בקשה (חסר שדה עיר)
- **OwnerDashboardScreen.js** - ממשק ניהול החניות
- **owner.routes.ts** - backend routes עם authentication

### מה שנדרש לשינוי:
1. הסרת requirement להתחברות במסלול הגשת בקשה
2. הוספת שדה עיר בטופס הגשת בקשה
3. שינוי טקסט כפתור מ"הוסף חניה" ל"שלח בקשה" עבור משתמשים חדשים
4. יצירת זרימה נכונה בין המסכים

## תרחיש 1: בעל חניה חדש (לא רשום)

### שלבים:
1. **דף הבית** → לחיצה על "בעל/ת חניה? התחילו להשכיר"
2. **OwnerIntroScreen** → מציג מצב 'none' → כפתור "הגש בקשה"
3. **OwnerApplyScreen** → מילוי 5 שדות: שם, טלפון, אימייל, כתובת, עיר → "שלח בקשה"
4. **שרת** → קבלת בקשה באדמין באזור "בקשות בעלי חניה"
5. **טלפון** → מילוי טופס אונבורדינג
6. **אישור** → שליחה לחתימה במייל
7. **אישור סופי** → מעבר למצב approved במערכת

## תרחיש 2: בעל חניה מאושר

### שלבים:
1. **דף הבית** → לחיצה על "בעל חניה התחילו להשכיר"
2. **OwnerIntroScreen** → מציג מצב 'approved' → כניסה ישירה לממשק ניהול
3. **OwnerDashboardScreen** → ניהול חניות, הוספת חניה חדשה, עדכון פרטים

---

## תכנית העבודה - שלבים

### ☐ שלב 1: עדכון טופס הגשת בקשה
- [ ] הוספת שדה "עיר" ב-OwnerApplyScreen
- [ ] שינוי טקסט כותרת מ"הוספת חניה חדשה" ל"בקשה להיות בעל חניה"
- [ ] שינוי טקסט כפתור מ"הוסף חניה" ל"שלח בקשה"
- [ ] וידוא שהטופס עובד ללא התחברות

**בדיקה**: טופס עם 5 שדות פועל ושולח בקשה ללא התחברות

---

### ☐ שלב 2: עדכון backend לקבל בקשות ללא התחברות
- [ ] יצירת route חדש `/api/owner/apply` ללא authentication
- [ ] העברת הלוגיקה מ-`/listing-requests` לroute החדש
- [ ] וידוא שמידע נשמר נכון בשרת

**בדיקה**: בקשה נשלחת בהצלחה ונשמרת בשרת ללא התחברות

---

### ☐ שלב 3: עדכון זרימה במסך OwnerIntroScreen
- [ ] ודא שמצב 'none' מציג את הכפתור הנכון
- [ ] ודא שמצב 'pending' מציג מסר המתנה
- [ ] ודא שמצב 'approved' מאפשר כניסה לממשק

**בדיקה**: כל 3 המצבים עובדים נכון וניווטים למקום הנכון

---

### ☐ שלב 4: בדיקת ממשק ניהול לבעלי חניה מאושרים
- [ ] וידוא שOwnerDashboardScreen עובד עם משתמשים מאושרים
- [ ] בדיקת פונקציונליות הוספת חניה חדשה
- [ ] בדיקת ניהול החניות הקיימות

**בדיקה**: בעלי חניה מאושרים יכולים לנהל את החניות שלהם

---

### ☐ שלב 5: בדיקות אינטגרציה
- [ ] בדיקת זרימה מלאה תרחיש 1 (חדש)
- [ ] בדיקת זרימה מלאה תרחיש 2 (מאושר)
- [ ] וידוא שלא נשבר כלום במסלולים הקיימים

**בדיקה**: שני התרחישים עובדים מתחילה לסוף

---

### ☐ שלב 6: תיקונים ואופטימיזציה
- [ ] תיקון באגים שנמצאו בבדיקות
- [ ] שיפור UX לפי הצורך
- [ ] וידוא שההודעות לוחצנים ברורות

**בדיקה סופית**: כל הזרימה עובדת חלק ונוחה למשתמש

---

## הערות חשובות:
- **אין צורך בהתחברות** עבור הגשת בקשה ראשונית
- **שימוש במסכים קיימים** - לא ליצור מסכים חדשים
- **עדכון progressively** - כל שלב נבדק לפני המעבר הבא
- **הפרדה בין תרחישים** - וודא שלכל תרחיש יש מסלול ברור

---

*תכנית זו תיושם שלב אחר שלב, עם בדיקה לאחר כל שלב לוודא שהכל עובד כמתוכנן לפני המעבר לשלב הבא.*
